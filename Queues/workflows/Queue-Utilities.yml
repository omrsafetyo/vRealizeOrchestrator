inputForms: []
workflowSchema:
  display-name: Queue Utilities
  position:
    'y': 64.09090909090908
    x: 205
  input:
    param:
      - name: queueName
        type: string
      - description: 'possbile actions: list, purge, remove'
        name: actions
        type: string
      - description: guid of item to remove
        name: itemId
        type: string
  attrib:
    - type: ConfigurationElement
      name: queue
    - value:
        string:
          value: ''
      type: string
      name: errorCode
    - type: Array/void
      name: queueContents
  workflow-item:
    - position:
        'y': 127.22727272727272
        x: 484.5
      name: item0
      type: end
      end-mode: '0'
      comparator: 0
    - display-name: Init
      script:
        value: "System.log(\"Getting queue.\");\ntry {\n\tqueue = System.getModule(\"omrsafetyo.utilities.queue\").getQueue(queueName);\n}\ncatch (e) {\n\tSystem.log(\"Error: Queue not found.\");\n}\n\nif (queue) {\n\tSystem.log(\"Queue found.\");\n}\nelse {\n\tthrow(\"Unable to find queue, exiting.\");\n}"
        encoded: false
      in-binding:
        bind:
          - name: queueName
            type: string
            export-name: queueName
      out-binding:
        bind:
          - name: queue
            type: ConfigurationElement
            export-name: queue
      position:
        'y': 73.59090909090908
        x: 304.5
      name: item1
      out-name: item3
      catch-name: item2
      throw-bind-name: errorCode
      type: task
      comparator: 0
    - position:
        'y': 127.22727272727272
        x: 345
      name: item2
      throw-bind-name: errorCode
      type: end
      end-mode: '1'
      comparator: 0
    - display-name: Switch
      script:
        value: |-
          //Generated by the system, cannot be edited
          if (actions == "list") {
              return "item12";
          } else if (actions == "purge") {
              return "item5";
          } else if (actions == "remove") {
              return "item7";
          } else if (true) {
              return "item0";
          }
        encoded: false
      in-binding:
        bind:
          - name: actions
            type: string
            export-name: actions
      condition:
        - value: list
          name: actions
          type: string
          comparator: '0'
          label: item12
        - value: purge
          name: actions
          type: string
          comparator: '0'
          label: item5
        - value: remove
          name: actions
          type: string
          comparator: '0'
          label: item7
        - value: ''
          name: ''
          type: boolean
          comparator: '6'
          label: item0
      position:
        'y': 73.59090909090908
        x: 444.5
      name: item3
      type: switch
      comparator: 0
    - position:
        'y': 9.045454545454543
        x: 764.5
      name: item4
      type: end
      end-mode: '0'
      comparator: 0
    - position:
        'y': 63.59090909090908
        x: 764.5
      name: item6
      type: end
      end-mode: '0'
      comparator: 0
    - display-name: System+Server error
      script:
        value: |
          //Auto-generated script
          System.error(text + " - " + object);
          Server.error(text, object);
        encoded: false
      in-binding:
        bind:
          - description: The text to log
            name: text
            type: String
            export-name: errorCode
          - description: The text to log and additional info
            name: object
            type: Any
            export-name: errorCode
          - name: errorCode
            type: string
            export-name: errorCode
      out-binding: {}
      description: Log the input text to the console and the server log with level 'error'
      position:
        'y': 73.59090909090908
        x: 1024.5
      name: item8
      out-name: item9
      catch-name: item9
      throw-bind-name: errorCode
      type: task
      prototype-id: system-server-error
      interaction: l
      comparator: 0
    - position:
        'y': 63.59090909090908
        x: 1204.5
      name: item9
      throw-bind-name: errorCode
      type: end
      end-mode: '1'
      comparator: 0
    - position:
        'y': 118.13636363636363
        x: 764.5
      name: item11
      type: end
      end-mode: '0'
      comparator: 0
    - display-name: listQueueContents
      script:
        value: >-
          //Auto generated script, cannot be modified !

          actionResult =
          System.getModule("omrsafetyo.utilities.queue").listQueueContents(queue)
          ;
        encoded: false
      in-binding:
        bind:
          - name: queue
            type: ConfigurationElement
            export-name: queue
      out-binding:
        bind:
          - name: actionResult
            type: Array/void
            export-name: queueContents
      position:
        'y': 19.045454545454543
        x: 564.5
      name: item12
      out-name: item4
      catch-name: item8
      throw-bind-name: errorCode
      type: task
      script-module: omrsafetyo.utilities.queue/listQueueContents
      comparator: 0
    - display-name: purgeQueue
      script:
        value: |-
          //Auto generated script, cannot be modified !
          System.getModule("omrsafetyo.utilities.queue").purgeQueue(queue) ;
        encoded: false
      in-binding:
        bind:
          - name: queue
            type: ConfigurationElement
            export-name: queue
      out-binding: {}
      position:
        'y': 73.59090909090908
        x: 564.5
      name: item5
      out-name: item6
      catch-name: item8
      throw-bind-name: errorCode
      type: task
      script-module: omrsafetyo.utilities.queue/purgeQueue
      comparator: 0
    - display-name: removeQueueItem
      script:
        value: >-
          //Auto generated script, cannot be modified !

          System.getModule("omrsafetyo.utilities.queue").removeQueueItem(queue,itemId)
          ;
        encoded: false
      in-binding:
        bind:
          - name: queue
            type: ConfigurationElement
            export-name: queue
          - name: itemId
            type: string
            export-name: itemId
      out-binding: {}
      position:
        'y': 128.13636363636363
        x: 564.5
      name: item7
      out-name: item11
      catch-name: item8
      throw-bind-name: errorCode
      type: task
      script-module: omrsafetyo.utilities.queue/removeQueueItem
      comparator: 0
  presentation:
    p-param:
      - desc: queueName
        name: queueName
      - desc: 'possbile actions: list, purge'
        name: actions
      - desc: guid of item to remove
        name: itemId
  root-name: item1
  object-name: 'workflow:name=generic'
  id: 6d191116-fc2f-4db7-a5f8-07b667240bcf
  version: 0.0.9
  api-version: 6.0.0
  allowed-operations: vfe
  restartMode: 1
  resumeFromFailedMode: 0
